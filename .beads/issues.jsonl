{"id":"task-1","title":"Fix command injection vulnerability in updateVersionFile","description":"The updateVersionFile function uses exec.Command with unsanitized user input (filePath), creating a command injection security vulnerability. This allows potential execution of arbitrary commands through malicious file paths.","acceptance_criteria":"Function validates and sanitizes filePath parameter before use\nFunction uses go-git library instead of exec commands for Git operations\nFunction rejects paths containing shell metacharacters or path traversal attempts\nUnit tests verify rejection of malicious file paths","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-10-25T13:01:17.989571-05:00","updated_at":"2025-10-25T13:01:17.989571-05:00","closed_at":"2025-10-24T19:36:09.989273-05:00"}
{"id":"task-10","title":"Refactor CLI to separate business logic","description":"The CLI commands directly call core library functions, making testing difficult and violating separation of concerns. Business logic should be separated from CLI presentation layer.","acceptance_criteria":"Business logic extracted into separate service layer\nCLI handlers only handle parsing and presentation\nService layer is independently testable\nCode maintains backward compatibility","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-25T13:01:17.990693-05:00","updated_at":"2025-10-25T13:01:17.990693-05:00"}
{"id":"task-11","title":"Implement proper semantic version comparison","description":"The current version sorting logic uses string comparison for pre-release suffixes, which doesn't follow SemVer specification. This can lead to incorrect version ordering when pre-release identifiers contain mixed alphanumeric content.","design":"1. Research SemVer 2.0 specification for pre-release comparison rules\n2. Analyze current compareSuffixes function to identify non-compliant behavior\n3. Implement proper pre-release identifier parsing and comparison logic\n4. Create comprehensive test suite covering SemVer edge cases\n5. Update existing version comparison functions to use new SemVer logic\n6. Run regression tests to ensure backward compatibility\n7. Document the SemVer compliance improvements","acceptance_criteria":"Version comparison follows SemVer 2.0 specification exactly\nPre-release versions are sorted correctly (alpha \u003c beta \u003c rc)\nNumeric identifiers in pre-release are compared numerically\nComprehensive test suite validates SemVer compliance with edge cases","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-10-25T13:01:17.991375-05:00","updated_at":"2025-10-25T13:01:17.991375-05:00"}
{"id":"task-12","title":"Add concurrency testing for git operations","description":"The new git locking mechanism needs comprehensive testing to verify it properly handles concurrent operations and prevents race conditions.","acceptance_criteria":"Tests verify concurrent bump operations don't corrupt repository\nLock timeout and stale lock detection are tested\nTests cover multiple processes accessing same repository\nRace detector passes on all concurrent tests","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-25T13:01:17.992004-05:00","updated_at":"2025-10-25T13:01:17.992004-05:00"}
{"id":"task-13","title":"Upgrade Go version to 1.25.0 to resolve build toolchain mismatch","description":"Current build fails due to Go toolchain version mismatch. The code requires Go 1.25.0 but the environment has Go 1.24.6, causing build failures.","acceptance_criteria":"go.mod specifies go 1.25.0\nBuild completes successfully with Go 1.25.0\nCI/CD pipeline updated to use Go 1.25.0\nAll tests pass with new Go version","status":"closed","priority":3,"issue_type":"task","created_at":"2025-10-25T13:01:17.992617-05:00","updated_at":"2025-10-25T13:01:17.992617-05:00","closed_at":"2025-10-24T19:36:10.935727-05:00"}
{"id":"task-14","title":"Create comprehensive API documentation for core bump package","description":"Create detailed API documentation for the core bump package to help developers understand and contribute to the codebase. This will improve maintainability and make it easier for new contributors to understand the internal APIs.","acceptance_criteria":"Package-level documentation added with overview and examples\nAll public functions and types have comprehensive godoc comments\nCode examples demonstrate key functionality\nDocumentation follows Go documentation conventions\nDocumentation is accessible via go doc command","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-25T13:01:17.993474-05:00","updated_at":"2025-10-25T13:01:17.993474-05:00"}
{"id":"task-15","title":"Create comprehensive user guide with examples and workflows","description":"Develop a detailed user guide that covers common workflows, use cases, and best practices for using the bump tool.","acceptance_criteria":"User guide covers common workflows and use cases\nExamples demonstrate best practices\nGuide includes troubleshooting section\nDocumentation is easy to navigate and search","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-25T13:01:17.994444-05:00","updated_at":"2025-10-25T13:01:17.994444-05:00"}
{"id":"task-16","title":"Create contributing guidelines and development setup documentation","description":"Establish clear contributing guidelines and development setup instructions to make it easy for new contributors to get started.","acceptance_criteria":"Contributing guidelines document all contribution requirements\nDevelopment setup instructions are clear and complete\nCode of conduct is established\nPR and issue templates are created","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-25T13:01:17.99543-05:00","updated_at":"2025-10-25T13:01:17.99543-05:00"}
{"id":"task-17","title":"Add support for additional version schemes beyond semantic versioning","description":"Extend the tool to support alternative versioning schemes like Calendar Versioning (CalVer) and build numbers to make it more versatile for different project types.","acceptance_criteria":"CalVer (Calendar Versioning) format support implemented\nBuild number versioning support added\nVersion scheme can be configured per repository\nExisting semantic versioning functionality remains unchanged\nVersion format validation works for all supported schemes\nDocumentation updated with examples for each scheme","status":"open","priority":2,"issue_type":"feature","created_at":"2025-10-25T13:01:17.996003-05:00","updated_at":"2025-10-25T13:01:17.996003-05:00"}
{"id":"task-18","title":"Implement configuration file support for bump settings","description":"Add support for a configuration file (.bumprc, bump.yaml, or similar) to allow per-repository customization of bump behavior without command-line flags.","acceptance_criteria":"Configuration file format is defined and documented\nTool reads and validates configuration on startup\nConfig file supports all relevant settings (push, prefix, etc.)\nCommand-line flags override config file settings\nError messages guide users when config is invalid","status":"open","priority":2,"issue_type":"feature","created_at":"2025-10-25T13:01:17.996584-05:00","updated_at":"2025-10-25T13:01:17.996584-05:00"}
{"id":"task-19","title":"Add shell completion support for bash, zsh, and fish","description":"Implement shell completion scripts to improve user experience and discoverability of commands and flags.","acceptance_criteria":"Bash completion script works for commands and flags\nZsh completion script works for commands and flags\nFish completion script works for commands and flags\nInstallation instructions included in documentation\nCompletions suggest valid values where applicable","status":"open","priority":2,"issue_type":"feature","created_at":"2025-10-25T13:01:17.997647-05:00","updated_at":"2025-10-25T13:01:17.997647-05:00"}
{"id":"task-1lu","title":"Refactor cmd/bump package for testability (Phase 3: Git Interface + Service)","description":"Create git interface abstraction and service layer for maximum testability.\n\nPhase 3 Work:\n1. Create cmd/bump/git.go:\n   - Define GitRepository interface\n   - Define GitWorktree interface\n   - Implement GoGitRepository (real implementation)\n\n2. Create cmd/bump/git_mock_test.go:\n   - Implement MockGitRepository for testing\n   - Helper functions for common mock scenarios\n\n3. Create cmd/bump/service.go:\n   - Extract BumpService struct\n   - Coordinate pure functions + interfaces\n   - Return structured results (not void)\n   - Accept io.Writer for output (testable)\n\n4. Create cmd/bump/service_test.go:\n   - Comprehensive tests with mocked git\n   - Test all error paths\n   - Test all branches\n   - Test dry-run mode\n   - Test with different push preferences\n\nExpected Impact:\n- Coverage: 55-60% -\u003e 75-85% (+20-25%)\n- Overall project: 75% -\u003e 80-85%\n- Fully testable without real git repo\n- Clean architecture (interfaces, dependency injection)\n- Reusable service layer\n\nDependencies:\n- Requires Phase 1 (task-tyd) and Phase 2 (task-ept)\n- Completes refactoring needed for task-7e7\n\nSee history/CMD_REFACTORING_PLAN.md for details.","acceptance_criteria":"GitRepository and GitWorktree interfaces defined\nReal implementation (GoGitRepository) working\nMock implementation for testing created\nBumpService extracted with dependency injection\nAll service methods fully tested with mocks\nCoverage improvement: cmd/bump 55%+ -\u003e 75%+\nOverall project coverage 80%+","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-05T22:54:06.492198-06:00","updated_at":"2025-12-05T23:06:59.156589-06:00","dependencies":[{"issue_id":"task-1lu","depends_on_id":"task-ept","type":"blocks","created_at":"2025-12-05T22:54:13.652786-06:00","created_by":"daemon"},{"issue_id":"task-1lu","depends_on_id":"task-tyd","type":"blocks","created_at":"2025-12-05T22:54:13.680809-06:00","created_by":"daemon"}]}
{"id":"task-2","title":"Fix git config manipulation security vulnerability","description":"The SetDefaultPushPreference and GetDefaultPushPreference functions directly manipulate .git/config without proper validation or atomic operations, potentially corrupting git configuration or allowing unauthorized config modifications.","acceptance_criteria":"Config operations validate section and key names before modification\nConfig updates use atomic writes to prevent corruption\nFunction rejects attempts to modify non-bump config sections\nError handling properly reports configuration validation failures","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-10-25T13:01:17.998873-05:00","updated_at":"2025-10-25T13:01:17.998873-05:00","closed_at":"2025-10-24T19:36:10.135125-05:00"}
{"id":"task-20","title":"Implement integration testing with real git repositories","description":"Create comprehensive integration tests that work with real git repositories to verify end-to-end functionality and catch issues that unit tests might miss.","acceptance_criteria":"Integration tests use temporary real git repositories\nTests cover complete workflows from tag creation to push\nTests verify interaction with remote repositories\nTests clean up temporary resources properly\nTests run in CI/CD pipeline","status":"open","priority":3,"issue_type":"task","created_at":"2025-10-25T13:01:18.000048-05:00","updated_at":"2025-10-25T13:01:18.000048-05:00"}
{"id":"task-21","title":"Create performance benchmarking for large git repositories","description":"Develop performance benchmarks to ensure the tool performs well with repositories containing thousands of tags and commits.","acceptance_criteria":"Benchmark suite tests performance with 1000+ tags\nBenchmarks measure tag parsing, sorting, and creation\nPerformance regression tests added to CI\nBenchmark results are documented for baseline comparison","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-25T13:01:18.00075-05:00","updated_at":"2025-10-25T13:01:18.00075-05:00"}
{"id":"task-3","title":"Implement git operation concurrency protection","description":"Git operations (createTag and pushTag) lack proper locking mechanisms, creating race conditions when multiple bump processes run simultaneously. This can lead to corrupted tags or failed operations.","acceptance_criteria":"File-based locking mechanism prevents concurrent git operations\nLock is automatically released on process termination or failure\nOperations fail gracefully when unable to acquire lock within timeout\nUnit tests verify proper locking behavior under concurrent access","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-10-25T13:01:18.001381-05:00","updated_at":"2025-10-25T13:01:18.001381-05:00","closed_at":"2025-10-24T19:36:10.311489-05:00"}
{"id":"task-4","title":"Fix reversed HasPrefix arguments in tag filtering","description":"The tag filtering logic has reversed arguments to strings.HasPrefix, causing incorrect tag filtering behavior and potentially including unwanted tags in version calculations.","acceptance_criteria":"HasPrefix arguments are corrected to (tag, prefix) order\nTag filtering works correctly for version prefixes\nUnit tests verify correct tag filtering with various prefix patterns\nExisting functionality is preserved for non-prefixed tags","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-10-25T13:01:18.002216-05:00","updated_at":"2025-10-25T13:01:18.002216-05:00","closed_at":"2025-10-24T19:36:10.472393-05:00"}
{"id":"task-5","title":"Add path traversal protection for file updates","description":"The updateVersionFile function lacks comprehensive path traversal protection, allowing potential access to files outside the repository through crafted relative paths.","acceptance_criteria":"Function validates all file paths stay within repository boundaries\nRelative paths are resolved and validated before use\nPath traversal attempts (../, symlinks) are detected and rejected\nUnit tests verify protection against various path traversal techniques","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-10-25T13:01:18.003337-05:00","updated_at":"2025-10-25T13:01:18.003337-05:00","closed_at":"2025-10-24T19:36:10.568495-05:00"}
{"id":"task-6","title":"Fix resource leak in ReferenceIter usage","description":"The GetVersionTags function doesn't properly close ReferenceIter, causing resource leaks when processing tags. This can lead to file handle exhaustion in repositories with many tags or during repeated operations.","acceptance_criteria":"ReferenceIter is properly closed using defer after creation\nResource cleanup occurs even when errors happen during iteration\nUnit tests verify no resource leaks under normal and error conditions\nCode follows Go best practices for iterator resource management","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-10-25T13:01:18.00415-05:00","updated_at":"2025-10-25T13:01:18.00415-05:00","closed_at":"2025-10-24T19:36:10.661789-05:00"}
{"id":"task-7","title":"Fix ambiguous config preference return values","description":"The GetDefaultPushPreference function returns false for both 'explicit false' and 'unset' preference states, making it impossible to distinguish between a user who explicitly disabled push and a user who never set a preference.","acceptance_criteria":"Function signature changed to return (bool, bool) for value and existence\nCallers can distinguish between unset preference and explicit false\nCLI behavior respects the distinction appropriately\nUnit tests verify all three states: true, false, and unset","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-10-25T13:01:18.004787-05:00","updated_at":"2025-10-25T13:01:18.004787-05:00","closed_at":"2025-10-24T19:36:10.755135-05:00"}
{"id":"task-7e7","title":"Complete test coverage improvement to 90% with integration tests","description":"Continue test coverage work to reach 90% overall target. Current: 61.9% overall (86.8% core, 23.5% cmd).\n\nKey work needed:\n1. Create git repo integration test helper\n2. Add bumpVersion() integration tests (happy paths)\n3. Add updateVersionFile() integration tests\n4. Improve createTagWithLock/pushTagWithLock coverage\n5. Add more cmd package tests\n\nSee history/TEST_COVERAGE_90PCT_PLAN.md for detailed roadmap.\n\nEstimated effort: 6-9 hours for 90%, or 4-5 hours for 75-80%.","acceptance_criteria":"Overall test coverage reaches 90%\nCMD package coverage \u003e 60%\nCore package coverage \u003e 92%\nIntegration tests with real git repositories implemented\nAll main workflow paths tested (bump, tag, push, update-file)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-05T22:47:58.884709-06:00","updated_at":"2025-12-05T22:47:58.884709-06:00"}
{"id":"task-8","title":"Improve test coverage for error scenarios","description":"Test coverage improved from 71.3% to 86.8% for core package, and from 0% to 23.5% for cmd package. Overall coverage: 50.1% â†’ 61.9%. Created comprehensive test suite including:\n- Git locking mechanism tests (stale locks, concurrency)\n- Config management tests (Get/SetDefaultPushPreference)\n- Security validation tests (path traversal, injection attacks)\n- SemVer compliance tests\n- CMD package test suite from scratch\n- Edge case and error path coverage\n\nSee history/TEST_COVERAGE_90PCT_PLAN.md for detailed analysis and path to 90%.","acceptance_criteria":"Test coverage reaches minimum 90% overall\nAll error handling paths have corresponding test cases\nEdge cases (empty repos, malformed tags, network failures) are tested\nIntegration tests cover end-to-end workflows with mocked dependencies","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-25T13:01:18.005472-05:00","updated_at":"2025-12-05T22:43:37.173631-06:00","closed_at":"2025-12-05T22:43:37.173631-06:00"}
{"id":"task-9","title":"Remove duplicate test task definition in Taskfile.yml","description":"The Taskfile.yml contains duplicate test task definitions which can cause confusion and inconsistent test execution behavior.","acceptance_criteria":"Only one test task definition exists in Taskfile.yml\nTest task includes both coverage report and profile generation\nTask execution produces consistent results","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-10-25T13:01:18.006271-05:00","updated_at":"2025-10-25T13:01:18.006271-05:00","closed_at":"2025-10-24T19:36:10.845989-05:00"}
{"id":"task-ept","title":"Refactor cmd/bump package for testability (Phase 2: File Operations)","description":"Extract file operation logic from cmd/bump into testable components.\n\nPhase 2 Work:\n1. Create cmd/bump/fileops.go:\n   - type VersionFileUpdater struct\n   - ParseGoFile(filePath) -\u003e (*ast.File, *token.FileSet, error)\n   - UpdateVersionConstant(node, newVersion) -\u003e error\n   - WriteFormattedFile(filePath, fset, node) -\u003e error\n\n2. Create cmd/bump/fileops_test.go:\n   - Test AST manipulation with Go code fixtures\n   - Test error cases (file not found, invalid syntax, no Version constant)\n   - Test with temp files (no git required)\n\n3. Refactor updateVersionFile() to use VersionFileUpdater\n\nExpected Impact:\n- Coverage: 40-45% -\u003e 55-60% (+10-15%)\n- Overall project: 70% -\u003e 75%\n- File operations isolated from git operations\n- AST manipulation testable independently\n\nDependencies:\n- Requires Phase 1 (task-tyd) to be completed first\n- Blocks task-7e7 (90% coverage goal)\n\nSee history/CMD_REFACTORING_PLAN.md for details.","acceptance_criteria":"VersionFileUpdater struct created with separated concerns\nFile operations testable with temp files (no git needed)\nAST manipulation functions have 100% coverage\nupdateVersionFile() refactored to use fileops\nCoverage improvement: cmd/bump 40%+ -\u003e 55%+","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-05T22:53:50.925704-06:00","updated_at":"2025-12-05T23:06:12.874663-06:00","closed_at":"2025-12-05T23:06:12.874663-06:00","dependencies":[{"issue_id":"task-ept","depends_on_id":"task-tyd","type":"blocks","created_at":"2025-12-05T22:54:13.625351-06:00","created_by":"daemon"}]}
{"id":"task-t6u","title":"Refactor cmd/bump package for testability (Phase 2: File Operations)","description":"Extract file operation logic from cmd/bump into testable components.\n\nPhase 2 Work:\n1. Create cmd/bump/fileops.go:\n   - type VersionFileUpdater struct\n   - ParseGoFile(filePath) -\u003e (*ast.File, *token.FileSet, error)\n   - UpdateVersionConstant(node, newVersion) -\u003e error\n   - WriteFormattedFile(filePath, fset, node) -\u003e error\n\n2. Create cmd/bump/fileops_test.go:\n   - Test AST manipulation with Go code fixtures\n   - Test error cases (file not found, invalid syntax, no Version constant)\n   - Test with temp files (no git required)\n\n3. Refactor updateVersionFile() to use VersionFileUpdater\n\nExpected Impact:\n- Coverage: 40-45% -\u003e 55-60% (+10-15%)\n- Overall project: 70% -\u003e 75%\n- File operations isolated from git operations\n- AST manipulation testable independently\n\nDependencies:\n- Builds on Phase 1 refactoring\n- Makes Phase 3 (git interface) easier\n\nSee history/CMD_REFACTORING_PLAN.md for details.","acceptance_criteria":"VersionFileUpdater struct created with separated concerns\nFile operations testable with temp files (no git needed)\nAST manipulation functions have 100% coverage\nupdateVersionFile() refactored to use fileops\nCoverage improvement: cmd/bump 40%+ -\u003e 55%+","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-05T22:53:37.585034-06:00","updated_at":"2025-12-05T22:54:53.292171-06:00","closed_at":"2025-12-05T22:54:53.292171-06:00","dependencies":[{"issue_id":"task-t6u","depends_on_id":"task-7e7","type":"blocks","created_at":"2025-12-05T22:53:37.585559-06:00","created_by":"daemon"}]}
{"id":"task-tyd","title":"Refactor cmd/bump package for testability (Phase 1: Pure Functions)","description":"Extract pure business logic functions from cmd/bump to improve testability and separation of concerns.\n\nCurrent Issue:\n- bumpVersion() does 7 different things (file I/O, git I/O, business logic, UI, git ops, file ops, control flow)\n- updateVersionFile() does 8 different things (validation, file I/O, parsing, AST, writing, git staging, git commit)\n- Result: Only 23.5% test coverage, impossible to test without real git repo\n\nPhase 1 Work (This Task):\n1. Create cmd/bump/business.go with pure functions:\n   - calculateNextVersion(latestTag, bumpType, suffix) -\u003e (string, error)\n   - calculateDevVersion(tag) -\u003e (string, error)\n   - formatBumpMessage(tag, pushed) -\u003e string\n   - formatDryRunMessage(tag, wouldPush, updateFile) -\u003e string\n\n2. Create cmd/bump/business_test.go:\n   - Test all pure functions (100% coverage achievable)\n   - No mocks needed, no I/O, fast tests\n\n3. Refactor bumpVersion() to use pure functions\n\nExpected Impact:\n- Coverage: 23.5% -\u003e 40-45% (+15-20%)\n- Overall project: 61.9% -\u003e 70%\n- Better separation of concerns\n- Easier to maintain and extend\n\nSee history/CMD_REFACTORING_PLAN.md for complete roadmap.","acceptance_criteria":"Pure business logic functions extracted to cmd/bump/business.go\nAll pure functions have 100% test coverage\nbumpVersion() refactored to use pure functions\nTests run without requiring git repository or filesystem\nCoverage improvement: cmd/bump 23.5% -\u003e 40%+","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-05T22:53:21.931584-06:00","updated_at":"2025-12-05T23:01:41.719919-06:00","closed_at":"2025-12-05T23:01:41.719919-06:00","dependencies":[{"issue_id":"task-tyd","depends_on_id":"task-7e7","type":"blocks","created_at":"2025-12-05T22:53:21.932694-06:00","created_by":"daemon"}]}
